<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<title></title>
<link rel="stylesheet" href="css/reset.css">
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="swipe-photo">
    <ul class="swipe-photo-container clearfix">
        <li class="swipe-photo-item"><img src="img/0.jpg" class="swipe-photo-thumbnail"></li>
        <li class="swipe-photo-item"><img src="img/1.jpg" class="swipe-photo-thumbnail"></li>
        <li class="swipe-photo-item"><img src="img/2.jpg" class="swipe-photo-thumbnail"></li>
        <li class="swipe-photo-item"><img src="img/3.jpg" class="swipe-photo-thumbnail"></li>
        <li class="swipe-photo-item"><img src="img/4.jpg" class="swipe-photo-thumbnail"></li>
        <li class="swipe-photo-item"><img src="img/5.jpg" class="swipe-photo-thumbnail"></li>
    </ul>
</div>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
// ここまでたどり着いたあなたは勇者です。
// 今回やるのはフリックです。
// 指を動かしている間は .swipe-photo-container が移動し、離したときに一番近い要素の位置までアニメーションします。
// 挙動はanswerの方を良く見て確認しましょう。
// x座標の取得方法 
// function(e) {
//     e.originalEvent.changedTouches[0].pageX;
// }
// onに複数のイベントを貼る方法
// $(".hoge").on({
//     "event": function() { },
//     "event": function() { }
// });
// touchstart タッチしたタイミングを取ります。
// touchmove タッチしたあとの動いてる状態を取ります。(たくさんイベントが発生します。)
// touchend タッチを離したタイミングを取ります。
// あとは座標をごにょごにょいじるだけです。配列使います。ちょっと難しいです。// タッチイベント
$(function(){
    var $swipePhoto = $(".swipe-photo"),
    swipeContainer = $swipePhoto.find(".swipe-photo-container"),
    swipeItem = $swipePhoto.find(".swipe-photo-item"),
    swipeThumbnail = swipeItem.find(".swipe-photo-thumbnail"),
    swipeWidth = swipeThumbnail.width(),
    itemWidth = swipeItem.length,
    blank = [],
    g = 400,
    swipePosition = {x:undefined,thisX:undefined,startX:undefined,moveX:undefined};

    for(
        var c = 0;c <= itemWidth;c++){
            blank[c] = -c * swipeWidth
        }
        swipeContainer.width(swipeWidth*itemWidth
    );
    swipeItem.on({
        touchstart:function(i){
            swipePosition.thisX = parseInt(swipeContainer.css("left"));//整数にする
            swipePosition.startX = i.originalEvent.changedTouches[0].pageX-swipePosition.thisX
        },
        touchmove:function(i){i.preventDefault();
            swipePosition.x = i.originalEvent.changedTouches[0].pageX;
            if(swipePosition.x-swipePosition.startX >= 0){
                swipePosition.moveX = 0
            }else
            {if(swipePosition.x-swipePosition.startX <= blank[itemWidth-1]){swipePosition.moveX=blank[itemWidth-1]}
            else{
                swipePosition.moveX = swipePosition.x-swipePosition.startX}}swipeContainer.css({left:swipePosition.moveX}
        )},
        touchend:function(n){
            var m = "";
            for(var l = 0;l < itemWidth;l++){
                if(blank[l] + (swipeWidth/2) > swipePosition.moveX && swipePosition.moveX >= blank[l+1] + (swipeWidth/2)){m = l}}swipeContainer.animate({left:blank[m]},g
        )}
    })
});

// $(function() {
//     var $swipeContainer = '.swipe-photo-container';
//     var click = 0;
//     const swipeWidth = $('.swipe-photo-container li').width();
//     var swipeLi = $('.swipe-photo-container li').length;

//     $($swipeContainer).on('touchstart', onTouchStart); //指が触れたか検知
//     $($swipeContainer).on('touchmove', onTouchMove); //指が動いたか検知
//     $($swipeContainer).on('touchend', onTouchEnd); //指が離れたか検知
//     var direction, position;

//     //スワイプ開始時の横方向の座標を格納
//     function onTouchStart(event) {
//         position = getPosition(event);
//         direction = ''; //一度リセットする
//     }

//     //スワイプの方向（left／right）を取得
//     function onTouchMove(event) {
//         if (position - getPosition(event) > 70) { // 70px以上移動しなければスワイプと判断しない
//             direction = 'left'; //左と検知
//         } else if (position - getPosition(event) < -70){  // 70px以上移動しなければスワイプと判断しない
//             direction = 'right'; //右と検知
//         }
//     }

//     function onTouchEnd(event) {
//         if (direction == 'right'){
//             $(function(){
//                 var b=$(".swipe-photo"),
//                 f=b.find(".swipe-photo-container"),
//                 j=b.find(".swipe-photo-item"),
//                 e=j.find(".swipe-photo-thumbnail"),
//                 h=e.width(),a=j.length,k=[],g=400,
//                 d={x:undefined,thisX:undefined,startX:undefined,moveX:undefined};
//                 for(var c=0;c<=a;c++){k[c]=-c*h}f.width(h*a);
//                 j.on({touchstart:function(i){
//                     d.thisX=parseInt(f.css("left"));
//                     d.startX=i.originalEvent.changedTouches[0].pageX-d.thisX},
//                     touchmove:function(i){i.preventDefault();
//                         d.x=i.originalEvent.changedTouches[0].pageX;
//                         if(d.x-d.startX>=0){d.moveX=0
//                         }else{if(d.x-d.startX<=k[a-1]){d.moveX=k[a-1]}
//                         else{d.moveX=d.x-d.startX}}f.css({left:d.moveX})},
//                         touchend:function(n){
//                             var m="";
//                             for(var l=0;l<a;l++){
//                                 if(k[l]+(h/2)>d.moveX&&d.moveX>=k[l+1]+(h/2)){m=l}}f.animate({left:k[m]},g)}})});
//         } else if (direction == 'left'){

//        }
        // if (direction == 'right'){
        //     slider(current + 1);
        // } else if (direction == 'left'){
        //     slider(current - 1);
        // }
    //     function onTouchEnd(event) {
//         if (direction == 'right'){
//             swipeCurrent--;
//             swiping();
//             // $($swipeContainer).animate({
//             //     right: -swipeWidth
//             // }, 500);
//         } else if (direction == 'left'){
//             swipeCurrent++;
//             swiping();
//             // $($swipeContainer).animate({
//             //     left: 1 * swipeWidth
//             // }, 500);
//         }
//     }

    //横方向の座標を取得
//     function getPosition(event) {
//         return event.originalEvent.touches[0].pageX;
//     }
// });
// $(function(){
//     var $swipeContainer = '.swipe-photo-container';
//     const swipeWidth = $('.swipe-photo-container li').width();
//     var $swipeNum = $('.swipe-photo-container li').length;

//     var $swipeSetWidth = $swipeNum * swipeWidth;
//     var swipeCurrent = 0;

//     $($swipeContainer).css('width',$swipeSetWidth);
//     var swiping = function(){

//         // slideCurrentが0以下だったら
//         if( swipeCurrent < 0 ){
//         swipeCurrent = $swipeNum - 1;

//         // slideCurrentがslideNumを超えたら
//         }else if( swipeCurrent > $swipeNum - 1){ // slideCUrrent >= slideNumでも可
//         swipeCurrent = 0;
//         }

//         $($swipeContainer).animate({
//         left: swipeCurrent * -swipeWidth
//         });
//     };
    
//     $('#touch').on('touchstart',onTouchStart);
//     $('#touch').on('touchmove',onTouchMove);
//     $('#touch').on('touched',onTouchEnd);
//     var direction, position;

//     function onTouchStart(event) {
//         position = getPosition(event);
//         direction = "";
//     }

//     function onTouchMove(event) {
//         if (position - getPosition(event) > 70) {
//             direction = 'left';
//         } else if (position - getPosition(event) < -70){
//             direction = 'right';
//         }
//     }

//     function onTouchEnd(event) {
//         if (direction == 'right'){
//             swipeCurrent--;
//             swiping();
//             // $($swipeContainer).animate({
//             //     right: -swipeWidth
//             // }, 500);
//         } else if (direction == 'left'){
//             swipeCurrent++;
//             swiping();
//             // $($swipeContainer).animate({
//             //     left: 1 * swipeWidth
//             // }, 500);
//         }
//     }

//     function getPosition(event) {
//         return (event.originalEvent.touches[0].pageX);
//     }
// });


// window.addEventListener(".swipe-photo", function(event) {
//     var touchStartX;
//     var touchStartY;
//     var touchMoveX;
//     var touchMoveY;
 
//     // 開始時
//     window.addEventListener("touchstart", function(event) {
//     event.preventDefault();
//     // 座標の取得
//     touchStartX = event.touches[0].pageX;
//     touchStartY = event.touches[0].pageY;
//     }, false);
 
//     // 移動時
//     window.addEventListener("touchmove", function(event) {
//     event.preventDefault();
//     // 座標の取得
//     touchMoveX = event.changedTouches[0].pageX;
//     touchMoveY = event.changedTouches[0].pageY;
//     }, false);
 
//     // 終了時
//     window.addEventListener("touchend", function(event) {
//     // 移動量の判定
//     if (touchStartX > touchMoveX) {
//         if (touchStartX > (touchMoveX + 50)) {
//         //右から左に指が移動した場合
//         }
//     } else if (touchStartX < touchMoveX) {
//         if ((touchStartX + 50) < touchMoveX) {
//         //左から右に指が移動した場合
//         }
//     }
//     }, false);
// }, false);


// $(funciton(){

//     var rgb_color = 0;
//         function setSwipe(elem) {
//         var t = document.querySelector(elem);
//         var s_X;
//         var e_X;
//         var dist = 30;
//         t.addEventListener('touchstart', function(e) {
//         e.preventDefault();
//         s_X = e.touches[0].pageX;
//         });
//         t.addEventListener('touchmove', function(e) {
//         e.preventDefault();
//         e_X = e.changedTouches[0].pageX;
//         });
//         t.addEventListener('touchend', function(e) {
//         if (s_X > e_X + dist) {
//         t.textContent = '<<<?-左にスワイプされました';
//         rgb_color = rgb_color + 16;
//         t.style.backgroundColor = "rgb("+ rgb_color + ","+ rgb_color + "," + rgb_color + ")";
//         } else if (s_X + dist < e_X) {
//         t.textContent = '右にスワイプされました?->>>';
//         rgb_color = rgb_color + 16;
//         t.style.backgroundColor = "rgb(" + rgb_color + "," + rgb_color + "," + rgb_color + ")";
//         }
//         });
//         }
//         setSwipe('.swipearea');
    
// });
// $(function() {
//   var swipeContainer =".swipe-photo-container";
//   $(swipeContainer).on('touchstart', onTouchStart); //指が触れたか検知
//   $(swipeContainer).on('touchmove', onTouchMove); //指が動いたか検知
//   $(swipeContainer).on('touchend', onTouchEnd); //指が離れたか検知
//   var direction, position;

//   //スワイプ開始時の横方向の座標を格納
//   function onTouchStart(event) {
//     position = getPosition(event);
//     direction = ''; //一度リセットする
//   }

//   //スワイプの方向（left／right）を取得
//   function onTouchMove(event) {
//     if (position - getPosition(event) > 70) { // 70px以上移動しなければスワイプと判断しない
//       direction = 'left'; //左と検知
//     } else if (position - getPosition(event) < -70){  // 70px以上移動しなければスワイプと判断しない
//       direction = 'right'; //右と検知
//     }
//   }
//   function onTouchEnd(event) {
//     if (direction == 'right'){
//       slideCurrent--;
//       sliding();
//     } else if (direction == 'left'){
//       slideCurrent++;
//       sliding();
//     }
//   }
//   //横方向の座標を取得
//   function getPosition(event) {
//     return event.originalEvent.touches[0].pageX;
//   }
// });
</script>
</body>
</html>
